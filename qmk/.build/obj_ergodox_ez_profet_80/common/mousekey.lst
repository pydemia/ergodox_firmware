   1               		.file	"mousekey.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.move_unit,"ax",@progbits
  12               	move_unit:
  13               	.LFB100:
  14               		.file 1 "./tmk_core/common/mousekey.c"
   1:./tmk_core/common/mousekey.c **** /*
   2:./tmk_core/common/mousekey.c **** Copyright 2011 Jun Wako <wakojun@gmail.com>
   3:./tmk_core/common/mousekey.c **** 
   4:./tmk_core/common/mousekey.c **** This program is free software: you can redistribute it and/or modify
   5:./tmk_core/common/mousekey.c **** it under the terms of the GNU General Public License as published by
   6:./tmk_core/common/mousekey.c **** the Free Software Foundation, either version 2 of the License, or
   7:./tmk_core/common/mousekey.c **** (at your option) any later version.
   8:./tmk_core/common/mousekey.c **** 
   9:./tmk_core/common/mousekey.c **** This program is distributed in the hope that it will be useful,
  10:./tmk_core/common/mousekey.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:./tmk_core/common/mousekey.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:./tmk_core/common/mousekey.c **** GNU General Public License for more details.
  13:./tmk_core/common/mousekey.c **** 
  14:./tmk_core/common/mousekey.c **** You should have received a copy of the GNU General Public License
  15:./tmk_core/common/mousekey.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:./tmk_core/common/mousekey.c **** */
  17:./tmk_core/common/mousekey.c **** 
  18:./tmk_core/common/mousekey.c **** #include <stdint.h>
  19:./tmk_core/common/mousekey.c **** #include "keycode.h"
  20:./tmk_core/common/mousekey.c **** #include "host.h"
  21:./tmk_core/common/mousekey.c **** #include "timer.h"
  22:./tmk_core/common/mousekey.c **** #include "print.h"
  23:./tmk_core/common/mousekey.c **** #include "debug.h"
  24:./tmk_core/common/mousekey.c **** #include "mousekey.h"
  25:./tmk_core/common/mousekey.c **** 
  26:./tmk_core/common/mousekey.c **** 
  27:./tmk_core/common/mousekey.c **** 
  28:./tmk_core/common/mousekey.c **** static report_mouse_t mouse_report = {};
  29:./tmk_core/common/mousekey.c **** static uint8_t mousekey_repeat =  0;
  30:./tmk_core/common/mousekey.c **** static uint8_t mousekey_accel = 0;
  31:./tmk_core/common/mousekey.c **** 
  32:./tmk_core/common/mousekey.c **** static void mousekey_debug(void);
  33:./tmk_core/common/mousekey.c **** 
  34:./tmk_core/common/mousekey.c **** 
  35:./tmk_core/common/mousekey.c **** /*
  36:./tmk_core/common/mousekey.c ****  * Mouse keys  acceleration algorithm
  37:./tmk_core/common/mousekey.c ****  *  http://en.wikipedia.org/wiki/Mouse_keys
  38:./tmk_core/common/mousekey.c ****  *
  39:./tmk_core/common/mousekey.c ****  *  speed = delta * max_speed * (repeat / time_to_max)**((1000+curve)/1000)
  40:./tmk_core/common/mousekey.c ****  */
  41:./tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  42:./tmk_core/common/mousekey.c **** uint8_t mk_delay = MOUSEKEY_DELAY/10;
  43:./tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  44:./tmk_core/common/mousekey.c **** uint8_t mk_interval = MOUSEKEY_INTERVAL;
  45:./tmk_core/common/mousekey.c **** /* steady speed (in action_delta units) applied each event (0-255) */
  46:./tmk_core/common/mousekey.c **** uint8_t mk_max_speed = MOUSEKEY_MAX_SPEED;
  47:./tmk_core/common/mousekey.c **** /* number of events (count) accelerating to steady speed (0-255) */
  48:./tmk_core/common/mousekey.c **** uint8_t mk_time_to_max = MOUSEKEY_TIME_TO_MAX;
  49:./tmk_core/common/mousekey.c **** /* ramp used to reach maximum pointer speed (NOT SUPPORTED) */
  50:./tmk_core/common/mousekey.c **** //int8_t mk_curve = 0;
  51:./tmk_core/common/mousekey.c **** /* wheel params */
  52:./tmk_core/common/mousekey.c **** uint8_t mk_wheel_max_speed = MOUSEKEY_WHEEL_MAX_SPEED;
  53:./tmk_core/common/mousekey.c **** uint8_t mk_wheel_time_to_max = MOUSEKEY_WHEEL_TIME_TO_MAX;
  54:./tmk_core/common/mousekey.c **** 
  55:./tmk_core/common/mousekey.c **** 
  56:./tmk_core/common/mousekey.c **** static uint16_t last_timer = 0;
  57:./tmk_core/common/mousekey.c **** 
  58:./tmk_core/common/mousekey.c **** 
  59:./tmk_core/common/mousekey.c **** static uint8_t move_unit(void)
  60:./tmk_core/common/mousekey.c **** {
  15               		.loc 1 60 0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  61:./tmk_core/common/mousekey.c ****     uint16_t unit;
  62:./tmk_core/common/mousekey.c ****     if (mousekey_accel & (1<<0)) {
  21               		.loc 1 62 0
  22 0000 8091 0000 		lds r24,mousekey_accel
  23 0004 80FF      		sbrs r24,0
  24 0006 00C0      		rjmp .L2
  63:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed)/4;
  25               		.loc 1 63 0
  26 0008 6091 0000 		lds r22,mk_max_speed
  27 000c 85E0      		ldi r24,lo8(5)
  28 000e 689F      		mul r22,r24
  29 0010 B001      		movw r22,r0
  30 0012 1124      		clr __zero_reg__
  31 0014 7595      		asr r23
  32 0016 6795      		ror r22
  33 0018 7595      		asr r23
  34 001a 6795      		ror r22
  35               	.LVL0:
  36 001c 00C0      		rjmp .L3
  37               	.LVL1:
  38               	.L2:
  64:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<1)) {
  39               		.loc 1 64 0
  40 001e 81FF      		sbrs r24,1
  41 0020 00C0      		rjmp .L4
  65:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed)/2;
  42               		.loc 1 65 0
  43 0022 6091 0000 		lds r22,mk_max_speed
  44 0026 85E0      		ldi r24,lo8(5)
  45 0028 689F      		mul r22,r24
  46 002a B001      		movw r22,r0
  47 002c 1124      		clr __zero_reg__
  48 002e 7595      		asr r23
  49 0030 6795      		ror r22
  50               	.LVL2:
  51 0032 00C0      		rjmp .L3
  52               	.LVL3:
  53               	.L4:
  66:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<2)) {
  54               		.loc 1 66 0
  55 0034 82FF      		sbrs r24,2
  56 0036 00C0      		rjmp .L5
  57               	.L7:
  67:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  58               		.loc 1 67 0
  59 0038 6091 0000 		lds r22,mk_max_speed
  60 003c 85E0      		ldi r24,lo8(5)
  61 003e 689F      		mul r22,r24
  62 0040 B001      		movw r22,r0
  63 0042 1124      		clr __zero_reg__
  64               	.LVL4:
  65 0044 00C0      		rjmp .L3
  66               	.LVL5:
  67               	.L5:
  68:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  68               		.loc 1 68 0
  69 0046 9091 0000 		lds r25,mousekey_repeat
  70 004a 9923      		tst r25
  71 004c 01F0      		breq .L9
  69:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  70:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
  72               		.loc 1 70 0
  73 004e 6091 0000 		lds r22,mk_time_to_max
  74 0052 9617      		cp r25,r22
  75 0054 00F4      		brsh .L7
  71:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  72:./tmk_core/common/mousekey.c ****     } else {
  73:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
  76               		.loc 1 73 0
  77 0056 2091 0000 		lds r18,mk_max_speed
  78 005a 85E0      		ldi r24,lo8(5)
  79 005c 289F      		mul r18,r24
  80 005e 9001      		movw r18,r0
  81 0060 1124      		clr __zero_reg__
  82 0062 929F      		mul r25,r18
  83 0064 A001      		movw r20,r0
  84 0066 939F      		mul r25,r19
  85 0068 500D      		add r21,r0
  86 006a 1124      		clr __zero_reg__
  87 006c 70E0      		ldi r23,0
  88 006e CA01      		movw r24,r20
  89 0070 0E94 0000 		call __divmodhi4
  90               	.LVL6:
  91               	.L3:
  74:./tmk_core/common/mousekey.c ****     }
  75:./tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
  92               		.loc 1 75 0
  93 0074 6038      		cpi r22,-128
  94 0076 7105      		cpc r23,__zero_reg__
  95 0078 00F4      		brsh .L10
  96               		.loc 1 75 0 is_stmt 0 discriminator 1
  97 007a 6115      		cp r22,__zero_reg__
  98 007c 7105      		cpc r23,__zero_reg__
  99 007e 01F4      		brne .L6
 100 0080 00C0      		rjmp .L13
 101               	.LVL7:
 102               	.L9:
  69:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 103               		.loc 1 69 0 is_stmt 1
 104 0082 65E0      		ldi r22,lo8(5)
 105 0084 70E0      		ldi r23,0
 106               	.L6:
 107               		.loc 1 75 0 discriminator 3
 108 0086 862F      		mov r24,r22
 109 0088 0895      		ret
 110               	.LVL8:
 111               	.L10:
 112               		.loc 1 75 0 is_stmt 0
 113 008a 8FE7      		ldi r24,lo8(127)
 114 008c 0895      		ret
 115               	.L13:
 116 008e 81E0      		ldi r24,lo8(1)
  76:./tmk_core/common/mousekey.c **** }
 117               		.loc 1 76 0 is_stmt 1
 118 0090 0895      		ret
 119               		.cfi_endproc
 120               	.LFE100:
 122               		.section	.text.wheel_unit,"ax",@progbits
 124               	wheel_unit:
 125               	.LFB101:
  77:./tmk_core/common/mousekey.c **** 
  78:./tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void)
  79:./tmk_core/common/mousekey.c **** {
 126               		.loc 1 79 0
 127               		.cfi_startproc
 128               	/* prologue: function */
 129               	/* frame size = 0 */
 130               	/* stack size = 0 */
 131               	.L__stack_usage = 0
  80:./tmk_core/common/mousekey.c ****     uint16_t unit;
  81:./tmk_core/common/mousekey.c ****     if (mousekey_accel & (1<<0)) {
 132               		.loc 1 81 0
 133 0000 8091 0000 		lds r24,mousekey_accel
 134 0004 80FF      		sbrs r24,0
 135 0006 00C0      		rjmp .L15
  82:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed)/4;
 136               		.loc 1 82 0
 137 0008 6091 0000 		lds r22,mk_wheel_max_speed
 138 000c 70E0      		ldi r23,0
 139 000e 7595      		asr r23
 140 0010 6795      		ror r22
 141 0012 7595      		asr r23
 142 0014 6795      		ror r22
 143               	.LVL9:
 144 0016 00C0      		rjmp .L23
 145               	.LVL10:
 146               	.L15:
  83:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<1)) {
 147               		.loc 1 83 0
 148 0018 81FF      		sbrs r24,1
 149 001a 00C0      		rjmp .L17
  84:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed)/2;
 150               		.loc 1 84 0
 151 001c 6091 0000 		lds r22,mk_wheel_max_speed
 152 0020 70E0      		ldi r23,0
 153 0022 7595      		asr r23
 154 0024 6795      		ror r22
 155               	.LVL11:
 156 0026 00C0      		rjmp .L23
 157               	.LVL12:
 158               	.L17:
  85:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<2)) {
 159               		.loc 1 85 0
 160 0028 82FF      		sbrs r24,2
 161 002a 00C0      		rjmp .L18
 162               	.L21:
  86:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 163               		.loc 1 86 0
 164 002c 6091 0000 		lds r22,mk_wheel_max_speed
 165 0030 70E0      		ldi r23,0
 166               	.LVL13:
 167 0032 00C0      		rjmp .L19
 168               	.LVL14:
 169               	.L18:
  87:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 170               		.loc 1 87 0
 171 0034 9091 0000 		lds r25,mousekey_repeat
 172 0038 9923      		tst r25
 173 003a 01F0      		breq .L24
  88:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
  89:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 174               		.loc 1 89 0
 175 003c 6091 0000 		lds r22,mk_wheel_time_to_max
 176 0040 9617      		cp r25,r22
 177 0042 00F4      		brsh .L21
  90:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
  91:./tmk_core/common/mousekey.c ****     } else {
  92:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_repeat) / mk_wheel_time_to_max
 178               		.loc 1 92 0
 179 0044 8091 0000 		lds r24,mk_wheel_max_speed
 180 0048 899F      		mul r24,r25
 181 004a C001      		movw r24,r0
 182 004c 1124      		clr __zero_reg__
 183 004e 70E0      		ldi r23,0
 184 0050 0E94 0000 		call __divmodhi4
 185               	.LVL15:
 186               	.L19:
  93:./tmk_core/common/mousekey.c ****     }
  94:./tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 187               		.loc 1 94 0
 188 0054 6038      		cpi r22,-128
 189 0056 7105      		cpc r23,__zero_reg__
 190 0058 00F4      		brsh .L25
 191               	.L23:
 192               		.loc 1 94 0 is_stmt 0 discriminator 1
 193 005a 6115      		cp r22,__zero_reg__
 194 005c 7105      		cpc r23,__zero_reg__
 195 005e 01F4      		brne .L20
 196 0060 00C0      		rjmp .L27
 197               	.LVL16:
 198               	.L24:
  88:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 199               		.loc 1 88 0 is_stmt 1
 200 0062 61E0      		ldi r22,lo8(1)
 201 0064 70E0      		ldi r23,0
 202               	.L20:
 203               		.loc 1 94 0 discriminator 3
 204 0066 862F      		mov r24,r22
 205 0068 0895      		ret
 206               	.LVL17:
 207               	.L25:
 208               		.loc 1 94 0 is_stmt 0
 209 006a 8FE7      		ldi r24,lo8(127)
 210 006c 0895      		ret
 211               	.L27:
 212 006e 81E0      		ldi r24,lo8(1)
  95:./tmk_core/common/mousekey.c **** }
 213               		.loc 1 95 0 is_stmt 1
 214 0070 0895      		ret
 215               		.cfi_endproc
 216               	.LFE101:
 218               		.section	.text.mousekey_on,"ax",@progbits
 219               	.global	mousekey_on
 221               	mousekey_on:
 222               	.LFB103:
  96:./tmk_core/common/mousekey.c **** 
  97:./tmk_core/common/mousekey.c **** void mousekey_task(void)
  98:./tmk_core/common/mousekey.c **** {
  99:./tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay*10))
 100:./tmk_core/common/mousekey.c ****         return;
 101:./tmk_core/common/mousekey.c **** 
 102:./tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0)
 103:./tmk_core/common/mousekey.c ****         return;
 104:./tmk_core/common/mousekey.c **** 
 105:./tmk_core/common/mousekey.c ****     if (mousekey_repeat != UINT8_MAX)
 106:./tmk_core/common/mousekey.c ****         mousekey_repeat++;
 107:./tmk_core/common/mousekey.c **** 
 108:./tmk_core/common/mousekey.c **** 
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 112:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 113:./tmk_core/common/mousekey.c **** 
 114:./tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2) = 0.7] */
 115:./tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 116:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 117:./tmk_core/common/mousekey.c ****         mouse_report.y *= 0.7;
 118:./tmk_core/common/mousekey.c ****     }
 119:./tmk_core/common/mousekey.c **** 
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = wheel_unit();
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 123:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 124:./tmk_core/common/mousekey.c **** 
 125:./tmk_core/common/mousekey.c ****     mousekey_send();
 126:./tmk_core/common/mousekey.c **** }
 127:./tmk_core/common/mousekey.c **** 
 128:./tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code)
 129:./tmk_core/common/mousekey.c **** {
 223               		.loc 1 129 0
 224               		.cfi_startproc
 225               	.LVL18:
 226               	/* prologue: function */
 227               	/* frame size = 0 */
 228               	/* stack size = 0 */
 229               	.L__stack_usage = 0
 130:./tmk_core/common/mousekey.c ****     if      (code == KC_MS_UP)       mouse_report.y = move_unit() * -1;
 230               		.loc 1 130 0
 231 0000 803F      		cpi r24,lo8(-16)
 232 0002 01F4      		brne .L29
 233               		.loc 1 130 0 is_stmt 0 discriminator 1
 234 0004 0E94 0000 		call move_unit
 235               	.LVL19:
 236 0008 8195      		neg r24
 237 000a 00C0      		rjmp .L45
 238               	.LVL20:
 239               	.L29:
 131:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)     mouse_report.y = move_unit();
 240               		.loc 1 131 0 is_stmt 1
 241 000c 813F      		cpi r24,lo8(-15)
 242 000e 01F4      		brne .L31
 243               		.loc 1 131 0 is_stmt 0 discriminator 1
 244 0010 0E94 0000 		call move_unit
 245               	.LVL21:
 246               	.L45:
 247 0014 8093 0000 		sts mouse_report+2,r24
 248 0018 0895      		ret
 249               	.LVL22:
 250               	.L31:
 132:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)     mouse_report.x = move_unit() * -1;
 251               		.loc 1 132 0 is_stmt 1
 252 001a 823F      		cpi r24,lo8(-14)
 253 001c 01F4      		brne .L32
 254               		.loc 1 132 0 is_stmt 0 discriminator 1
 255 001e 0E94 0000 		call move_unit
 256               	.LVL23:
 257 0022 8195      		neg r24
 258 0024 00C0      		rjmp .L47
 259               	.LVL24:
 260               	.L32:
 133:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)    mouse_report.x = move_unit();
 261               		.loc 1 133 0 is_stmt 1
 262 0026 833F      		cpi r24,lo8(-13)
 263 0028 01F4      		brne .L33
 264               		.loc 1 133 0 is_stmt 0 discriminator 1
 265 002a 0E94 0000 		call move_unit
 266               	.LVL25:
 267               	.L47:
 268 002e 8093 0000 		sts mouse_report+1,r24
 269 0032 0895      		ret
 270               	.LVL26:
 271               	.L33:
 134:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)    mouse_report.v = wheel_unit();
 272               		.loc 1 134 0 is_stmt 1
 273 0034 893F      		cpi r24,lo8(-7)
 274 0036 01F4      		brne .L34
 275               		.loc 1 134 0 is_stmt 0 discriminator 1
 276 0038 0E94 0000 		call wheel_unit
 277               	.LVL27:
 278 003c 00C0      		rjmp .L49
 279               	.LVL28:
 280               	.L34:
 135:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)  mouse_report.v = wheel_unit() * -1;
 281               		.loc 1 135 0 is_stmt 1
 282 003e 8A3F      		cpi r24,lo8(-6)
 283 0040 01F4      		brne .L35
 284               		.loc 1 135 0 is_stmt 0 discriminator 1
 285 0042 0E94 0000 		call wheel_unit
 286               	.LVL29:
 287 0046 8195      		neg r24
 288               	.L49:
 289 0048 8093 0000 		sts mouse_report+3,r24
 290 004c 0895      		ret
 291               	.LVL30:
 292               	.L35:
 136:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)  mouse_report.h = wheel_unit() * -1;
 293               		.loc 1 136 0 is_stmt 1
 294 004e 8B3F      		cpi r24,lo8(-5)
 295 0050 01F4      		brne .L36
 296               		.loc 1 136 0 is_stmt 0 discriminator 1
 297 0052 0E94 0000 		call wheel_unit
 298               	.LVL31:
 299 0056 8195      		neg r24
 300 0058 00C0      		rjmp .L50
 301               	.LVL32:
 302               	.L36:
 137:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT) mouse_report.h = wheel_unit();
 303               		.loc 1 137 0 is_stmt 1
 304 005a 8C3F      		cpi r24,lo8(-4)
 305 005c 01F4      		brne .L37
 306               		.loc 1 137 0 is_stmt 0 discriminator 1
 307 005e 0E94 0000 		call wheel_unit
 308               	.LVL33:
 309               	.L50:
 310 0062 8093 0000 		sts mouse_report+4,r24
 311 0066 0895      		ret
 312               	.LVL34:
 313               	.L37:
 138:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)     mouse_report.buttons |= MOUSE_BTN1;
 314               		.loc 1 138 0 is_stmt 1
 315 0068 843F      		cpi r24,lo8(-12)
 316 006a 01F4      		brne .L38
 317               		.loc 1 138 0 is_stmt 0 discriminator 1
 318 006c 8091 0000 		lds r24,mouse_report
 319               	.LVL35:
 320 0070 8160      		ori r24,lo8(1)
 321 0072 00C0      		rjmp .L48
 322               	.LVL36:
 323               	.L38:
 139:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)     mouse_report.buttons |= MOUSE_BTN2;
 324               		.loc 1 139 0 is_stmt 1
 325 0074 853F      		cpi r24,lo8(-11)
 326 0076 01F4      		brne .L39
 327               		.loc 1 139 0 is_stmt 0 discriminator 1
 328 0078 8091 0000 		lds r24,mouse_report
 329               	.LVL37:
 330 007c 8260      		ori r24,lo8(2)
 331 007e 00C0      		rjmp .L48
 332               	.LVL38:
 333               	.L39:
 140:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)     mouse_report.buttons |= MOUSE_BTN3;
 334               		.loc 1 140 0 is_stmt 1
 335 0080 863F      		cpi r24,lo8(-10)
 336 0082 01F4      		brne .L40
 337               		.loc 1 140 0 is_stmt 0 discriminator 1
 338 0084 8091 0000 		lds r24,mouse_report
 339               	.LVL39:
 340 0088 8460      		ori r24,lo8(4)
 341 008a 00C0      		rjmp .L48
 342               	.LVL40:
 343               	.L40:
 141:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)     mouse_report.buttons |= MOUSE_BTN4;
 344               		.loc 1 141 0 is_stmt 1
 345 008c 873F      		cpi r24,lo8(-9)
 346 008e 01F4      		brne .L41
 347               		.loc 1 141 0 is_stmt 0 discriminator 1
 348 0090 8091 0000 		lds r24,mouse_report
 349               	.LVL41:
 350 0094 8860      		ori r24,lo8(8)
 351 0096 00C0      		rjmp .L48
 352               	.LVL42:
 353               	.L41:
 142:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)     mouse_report.buttons |= MOUSE_BTN5;
 354               		.loc 1 142 0 is_stmt 1
 355 0098 883F      		cpi r24,lo8(-8)
 356 009a 01F4      		brne .L42
 357               		.loc 1 142 0 is_stmt 0 discriminator 1
 358 009c 8091 0000 		lds r24,mouse_report
 359               	.LVL43:
 360 00a0 8061      		ori r24,lo8(16)
 361               	.L48:
 362 00a2 8093 0000 		sts mouse_report,r24
 363 00a6 0895      		ret
 364               	.LVL44:
 365               	.L42:
 143:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)   mousekey_accel |= (1<<0);
 366               		.loc 1 143 0 is_stmt 1
 367 00a8 8D3F      		cpi r24,lo8(-3)
 368 00aa 01F4      		brne .L43
 369               		.loc 1 143 0 is_stmt 0 discriminator 1
 370 00ac 8091 0000 		lds r24,mousekey_accel
 371               	.LVL45:
 372 00b0 8160      		ori r24,lo8(1)
 373 00b2 00C0      		rjmp .L46
 374               	.LVL46:
 375               	.L43:
 144:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)   mousekey_accel |= (1<<1);
 376               		.loc 1 144 0 is_stmt 1
 377 00b4 8E3F      		cpi r24,lo8(-2)
 378 00b6 01F4      		brne .L44
 379               		.loc 1 144 0 is_stmt 0 discriminator 1
 380 00b8 8091 0000 		lds r24,mousekey_accel
 381               	.LVL47:
 382 00bc 8260      		ori r24,lo8(2)
 383 00be 00C0      		rjmp .L46
 384               	.LVL48:
 385               	.L44:
 145:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)   mousekey_accel |= (1<<2);
 386               		.loc 1 145 0 is_stmt 1
 387 00c0 8F3F      		cpi r24,lo8(-1)
 388 00c2 01F4      		brne .L28
 389               		.loc 1 145 0 is_stmt 0 discriminator 1
 390 00c4 8091 0000 		lds r24,mousekey_accel
 391               	.LVL49:
 392 00c8 8460      		ori r24,lo8(4)
 393               	.L46:
 394 00ca 8093 0000 		sts mousekey_accel,r24
 395               	.L28:
 396 00ce 0895      		ret
 397               		.cfi_endproc
 398               	.LFE103:
 400               		.section	.text.mousekey_off,"ax",@progbits
 401               	.global	mousekey_off
 403               	mousekey_off:
 404               	.LFB104:
 146:./tmk_core/common/mousekey.c **** }
 147:./tmk_core/common/mousekey.c **** 
 148:./tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code)
 149:./tmk_core/common/mousekey.c **** {
 405               		.loc 1 149 0 is_stmt 1
 406               		.cfi_startproc
 407               	.LVL50:
 408               	/* prologue: function */
 409               	/* frame size = 0 */
 410               	/* stack size = 0 */
 411               	.L__stack_usage = 0
 150:./tmk_core/common/mousekey.c ****     if      (code == KC_MS_UP       && mouse_report.y < 0) mouse_report.y = 0;
 412               		.loc 1 150 0
 413 0000 803F      		cpi r24,lo8(-16)
 414 0002 01F4      		brne .L52
 415               		.loc 1 150 0 is_stmt 0 discriminator 1
 416 0004 8091 0000 		lds r24,mouse_report+2
 417               	.LVL51:
 418 0008 87FF      		sbrs r24,7
 419 000a 00C0      		rjmp .L53
 420               	.L55:
 421               		.loc 1 150 0 discriminator 2
 422 000c 1092 0000 		sts mouse_report+2,__zero_reg__
 423 0010 00C0      		rjmp .L53
 424               	.LVL52:
 425               	.L52:
 151:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN     && mouse_report.y > 0) mouse_report.y = 0;
 426               		.loc 1 151 0 is_stmt 1
 427 0012 813F      		cpi r24,lo8(-15)
 428 0014 01F4      		brne .L54
 429               		.loc 1 151 0 is_stmt 0 discriminator 1
 430 0016 8091 0000 		lds r24,mouse_report+2
 431               	.LVL53:
 432 001a 1816      		cp __zero_reg__,r24
 433 001c 04F0      		brlt .L55
 434 001e 00C0      		rjmp .L53
 435               	.LVL54:
 436               	.L54:
 437 0020 9091 0000 		lds r25,mouse_report+1
 152:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT     && mouse_report.x < 0) mouse_report.x = 0;
 438               		.loc 1 152 0 is_stmt 1
 439 0024 823F      		cpi r24,lo8(-14)
 440 0026 01F4      		brne .L56
 441               		.loc 1 152 0 is_stmt 0 discriminator 1
 442 0028 97FF      		sbrs r25,7
 443 002a 00C0      		rjmp .L53
 444               	.L58:
 445               		.loc 1 152 0 discriminator 2
 446 002c 1092 0000 		sts mouse_report+1,__zero_reg__
 447 0030 00C0      		rjmp .L53
 448               	.L56:
 153:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT    && mouse_report.x > 0) mouse_report.x = 0;
 449               		.loc 1 153 0 is_stmt 1
 450 0032 833F      		cpi r24,lo8(-13)
 451 0034 01F4      		brne .L57
 452               		.loc 1 153 0 is_stmt 0 discriminator 1
 453 0036 1916      		cp __zero_reg__,r25
 454 0038 04F0      		brlt .L58
 455 003a 00C0      		rjmp .L53
 456               	.L57:
 154:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP    && mouse_report.v > 0) mouse_report.v = 0;
 457               		.loc 1 154 0 is_stmt 1
 458 003c 893F      		cpi r24,lo8(-7)
 459 003e 01F4      		brne .L59
 460               		.loc 1 154 0 is_stmt 0 discriminator 1
 461 0040 8091 0000 		lds r24,mouse_report+3
 462               	.LVL55:
 463 0044 1816      		cp __zero_reg__,r24
 464 0046 04F0      		brlt .+2
 465 0048 00C0      		rjmp .L53
 466               	.L61:
 467               		.loc 1 154 0 discriminator 2
 468 004a 1092 0000 		sts mouse_report+3,__zero_reg__
 469 004e 00C0      		rjmp .L53
 470               	.LVL56:
 471               	.L59:
 155:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN  && mouse_report.v < 0) mouse_report.v = 0;
 472               		.loc 1 155 0 is_stmt 1
 473 0050 8A3F      		cpi r24,lo8(-6)
 474 0052 01F4      		brne .L60
 475               		.loc 1 155 0 is_stmt 0 discriminator 1
 476 0054 8091 0000 		lds r24,mouse_report+3
 477               	.LVL57:
 478 0058 87FF      		sbrs r24,7
 479 005a 00C0      		rjmp .L53
 480 005c 00C0      		rjmp .L61
 481               	.LVL58:
 482               	.L60:
 156:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT  && mouse_report.h < 0) mouse_report.h = 0;
 483               		.loc 1 156 0 is_stmt 1
 484 005e 8B3F      		cpi r24,lo8(-5)
 485 0060 01F4      		brne .L62
 486               		.loc 1 156 0 is_stmt 0 discriminator 1
 487 0062 8091 0000 		lds r24,mouse_report+4
 488               	.LVL59:
 489 0066 87FF      		sbrs r24,7
 490 0068 00C0      		rjmp .L53
 491               	.L64:
 492               		.loc 1 156 0 discriminator 2
 493 006a 1092 0000 		sts mouse_report+4,__zero_reg__
 494 006e 00C0      		rjmp .L53
 495               	.LVL60:
 496               	.L62:
 157:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0) mouse_report.h = 0;
 497               		.loc 1 157 0 is_stmt 1
 498 0070 8C3F      		cpi r24,lo8(-4)
 499 0072 01F4      		brne .L63
 500               		.loc 1 157 0 is_stmt 0 discriminator 1
 501 0074 8091 0000 		lds r24,mouse_report+4
 502               	.LVL61:
 503 0078 1816      		cp __zero_reg__,r24
 504 007a 04F0      		brlt .L64
 505 007c 00C0      		rjmp .L53
 506               	.LVL62:
 507               	.L63:
 158:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1) mouse_report.buttons &= ~MOUSE_BTN1;
 508               		.loc 1 158 0 is_stmt 1
 509 007e 843F      		cpi r24,lo8(-12)
 510 0080 01F4      		brne .L65
 511               		.loc 1 158 0 is_stmt 0 discriminator 1
 512 0082 8091 0000 		lds r24,mouse_report
 513               	.LVL63:
 514 0086 8E7F      		andi r24,lo8(-2)
 515 0088 00C0      		rjmp .L74
 516               	.LVL64:
 517               	.L65:
 159:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2) mouse_report.buttons &= ~MOUSE_BTN2;
 518               		.loc 1 159 0 is_stmt 1
 519 008a 853F      		cpi r24,lo8(-11)
 520 008c 01F4      		brne .L66
 521               		.loc 1 159 0 is_stmt 0 discriminator 1
 522 008e 8091 0000 		lds r24,mouse_report
 523               	.LVL65:
 524 0092 8D7F      		andi r24,lo8(-3)
 525 0094 00C0      		rjmp .L74
 526               	.LVL66:
 527               	.L66:
 160:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3) mouse_report.buttons &= ~MOUSE_BTN3;
 528               		.loc 1 160 0 is_stmt 1
 529 0096 863F      		cpi r24,lo8(-10)
 530 0098 01F4      		brne .L67
 531               		.loc 1 160 0 is_stmt 0 discriminator 1
 532 009a 8091 0000 		lds r24,mouse_report
 533               	.LVL67:
 534 009e 8B7F      		andi r24,lo8(-5)
 535 00a0 00C0      		rjmp .L74
 536               	.LVL68:
 537               	.L67:
 161:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4) mouse_report.buttons &= ~MOUSE_BTN4;
 538               		.loc 1 161 0 is_stmt 1
 539 00a2 873F      		cpi r24,lo8(-9)
 540 00a4 01F4      		brne .L68
 541               		.loc 1 161 0 is_stmt 0 discriminator 1
 542 00a6 8091 0000 		lds r24,mouse_report
 543               	.LVL69:
 544 00aa 877F      		andi r24,lo8(-9)
 545 00ac 00C0      		rjmp .L74
 546               	.LVL70:
 547               	.L68:
 162:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5) mouse_report.buttons &= ~MOUSE_BTN5;
 548               		.loc 1 162 0 is_stmt 1
 549 00ae 883F      		cpi r24,lo8(-8)
 550 00b0 01F4      		brne .L69
 551               		.loc 1 162 0 is_stmt 0 discriminator 1
 552 00b2 8091 0000 		lds r24,mouse_report
 553               	.LVL71:
 554 00b6 8F7E      		andi r24,lo8(-17)
 555               	.L74:
 556 00b8 8093 0000 		sts mouse_report,r24
 557 00bc 00C0      		rjmp .L53
 558               	.LVL72:
 559               	.L69:
 163:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0) mousekey_accel &= ~(1<<0);
 560               		.loc 1 163 0 is_stmt 1
 561 00be 8D3F      		cpi r24,lo8(-3)
 562 00c0 01F4      		brne .L70
 563               		.loc 1 163 0 is_stmt 0 discriminator 1
 564 00c2 8091 0000 		lds r24,mousekey_accel
 565               	.LVL73:
 566 00c6 8E7F      		andi r24,lo8(-2)
 567 00c8 00C0      		rjmp .L73
 568               	.LVL74:
 569               	.L70:
 164:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1) mousekey_accel &= ~(1<<1);
 570               		.loc 1 164 0 is_stmt 1
 571 00ca 8E3F      		cpi r24,lo8(-2)
 572 00cc 01F4      		brne .L71
 573               		.loc 1 164 0 is_stmt 0 discriminator 1
 574 00ce 8091 0000 		lds r24,mousekey_accel
 575               	.LVL75:
 576 00d2 8D7F      		andi r24,lo8(-3)
 577 00d4 00C0      		rjmp .L73
 578               	.LVL76:
 579               	.L71:
 165:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2) mousekey_accel &= ~(1<<2);
 580               		.loc 1 165 0 is_stmt 1
 581 00d6 8F3F      		cpi r24,lo8(-1)
 582 00d8 01F4      		brne .L53
 583               		.loc 1 165 0 is_stmt 0 discriminator 1
 584 00da 8091 0000 		lds r24,mousekey_accel
 585               	.LVL77:
 586 00de 8B7F      		andi r24,lo8(-5)
 587               	.L73:
 588 00e0 8093 0000 		sts mousekey_accel,r24
 589               	.L53:
 166:./tmk_core/common/mousekey.c **** 
 167:./tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0)
 590               		.loc 1 167 0 is_stmt 1
 591 00e4 8091 0000 		lds r24,mouse_report+1
 592 00e8 8111      		cpse r24,__zero_reg__
 593 00ea 00C0      		rjmp .L51
 594               		.loc 1 167 0 is_stmt 0 discriminator 1
 595 00ec 8091 0000 		lds r24,mouse_report+2
 596 00f0 8111      		cpse r24,__zero_reg__
 597 00f2 00C0      		rjmp .L51
 598               		.loc 1 167 0 discriminator 2
 599 00f4 8091 0000 		lds r24,mouse_report+3
 600 00f8 8111      		cpse r24,__zero_reg__
 601 00fa 00C0      		rjmp .L51
 602               		.loc 1 167 0 discriminator 3
 603 00fc 8091 0000 		lds r24,mouse_report+4
 604 0100 8111      		cpse r24,__zero_reg__
 605 0102 00C0      		rjmp .L51
 168:./tmk_core/common/mousekey.c ****         mousekey_repeat = 0;
 606               		.loc 1 168 0 is_stmt 1
 607 0104 1092 0000 		sts mousekey_repeat,__zero_reg__
 608               	.L51:
 609 0108 0895      		ret
 610               		.cfi_endproc
 611               	.LFE104:
 613               		.section	.text.mousekey_send,"ax",@progbits
 614               	.global	mousekey_send
 616               	mousekey_send:
 617               	.LFB105:
 169:./tmk_core/common/mousekey.c **** }
 170:./tmk_core/common/mousekey.c **** 
 171:./tmk_core/common/mousekey.c **** void mousekey_send(void)
 172:./tmk_core/common/mousekey.c **** {
 618               		.loc 1 172 0
 619               		.cfi_startproc
 620               	/* prologue: function */
 621               	/* frame size = 0 */
 622               	/* stack size = 0 */
 623               	.L__stack_usage = 0
 173:./tmk_core/common/mousekey.c ****     mousekey_debug();
 174:./tmk_core/common/mousekey.c ****     host_mouse_send(&mouse_report);
 624               		.loc 1 174 0
 625 0000 80E0      		ldi r24,lo8(mouse_report)
 626 0002 90E0      		ldi r25,hi8(mouse_report)
 627 0004 0E94 0000 		call host_mouse_send
 628               	.LVL78:
 175:./tmk_core/common/mousekey.c ****     last_timer = timer_read();
 629               		.loc 1 175 0
 630 0008 0E94 0000 		call timer_read
 631               	.LVL79:
 632 000c 9093 0000 		sts last_timer+1,r25
 633 0010 8093 0000 		sts last_timer,r24
 634 0014 0895      		ret
 635               		.cfi_endproc
 636               	.LFE105:
 638               	.global	__floatsisf
 639               	.global	__mulsf3
 640               	.global	__fixsfsi
 641               		.section	.text.mousekey_task,"ax",@progbits
 642               	.global	mousekey_task
 644               	mousekey_task:
 645               	.LFB102:
  98:./tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay*10))
 646               		.loc 1 98 0
 647               		.cfi_startproc
 648 0000 1F93      		push r17
 649               	.LCFI0:
 650               		.cfi_def_cfa_offset 3
 651               		.cfi_offset 17, -2
 652 0002 CF93      		push r28
 653               	.LCFI1:
 654               		.cfi_def_cfa_offset 4
 655               		.cfi_offset 28, -3
 656 0004 DF93      		push r29
 657               	.LCFI2:
 658               		.cfi_def_cfa_offset 5
 659               		.cfi_offset 29, -4
 660               	/* prologue: function */
 661               	/* frame size = 0 */
 662               	/* stack size = 3 */
 663               	.L__stack_usage = 3
  99:./tmk_core/common/mousekey.c ****         return;
 664               		.loc 1 99 0
 665 0006 8091 0000 		lds r24,last_timer
 666 000a 9091 0000 		lds r25,last_timer+1
 667 000e 0E94 0000 		call timer_elapsed
 668               	.LVL80:
 669 0012 AC01      		movw r20,r24
 670 0014 9091 0000 		lds r25,mousekey_repeat
 671 0018 9923      		tst r25
 672 001a 01F0      		breq .L77
  99:./tmk_core/common/mousekey.c ****         return;
 673               		.loc 1 99 0 is_stmt 0 discriminator 1
 674 001c 2091 0000 		lds r18,mk_interval
 675 0020 30E0      		ldi r19,0
 676 0022 00C0      		rjmp .L78
 677               	.L77:
  99:./tmk_core/common/mousekey.c ****         return;
 678               		.loc 1 99 0 discriminator 2
 679 0024 2091 0000 		lds r18,mk_delay
 680 0028 8AE0      		ldi r24,lo8(10)
 681 002a 289F      		mul r18,r24
 682 002c 9001      		movw r18,r0
 683 002e 1124      		clr __zero_reg__
 684               	.L78:
  99:./tmk_core/common/mousekey.c ****         return;
 685               		.loc 1 99 0 discriminator 4
 686 0030 4217      		cp r20,r18
 687 0032 5307      		cpc r21,r19
 688 0034 00F4      		brsh .+2
 689 0036 00C0      		rjmp .L76
 102:./tmk_core/common/mousekey.c ****         return;
 690               		.loc 1 102 0 is_stmt 1
 691 0038 8091 0000 		lds r24,mouse_report+1
 692 003c C091 0000 		lds r28,mouse_report+2
 693 0040 D091 0000 		lds r29,mouse_report+3
 694 0044 1091 0000 		lds r17,mouse_report+4
 695 0048 8111      		cpse r24,__zero_reg__
 696 004a 00C0      		rjmp .L80
 102:./tmk_core/common/mousekey.c ****         return;
 697               		.loc 1 102 0 is_stmt 0 discriminator 1
 698 004c C111      		cpse r28,__zero_reg__
 699 004e 00C0      		rjmp .L81
 102:./tmk_core/common/mousekey.c ****         return;
 700               		.loc 1 102 0 discriminator 2
 701 0050 D111      		cpse r29,__zero_reg__
 702 0052 00C0      		rjmp .L81
 102:./tmk_core/common/mousekey.c ****         return;
 703               		.loc 1 102 0 discriminator 3
 704 0054 1111      		cpse r17,__zero_reg__
 705 0056 00C0      		rjmp .L81
 706 0058 00C0      		rjmp .L76
 707               	.L80:
 105:./tmk_core/common/mousekey.c ****         mousekey_repeat++;
 708               		.loc 1 105 0 is_stmt 1
 709 005a 9F3F      		cpi r25,lo8(-1)
 710 005c 01F0      		breq .L82
 711               	.L92:
 106:./tmk_core/common/mousekey.c **** 
 712               		.loc 1 106 0
 713 005e 9F5F      		subi r25,lo8(-(1))
 714 0060 9093 0000 		sts mousekey_repeat,r25
 715               	.L82:
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 716               		.loc 1 109 0
 717 0064 1816      		cp __zero_reg__,r24
 718 0066 04F4      		brge .L83
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 719               		.loc 1 109 0 is_stmt 0 discriminator 1
 720 0068 0E94 0000 		call move_unit
 721               	.LVL81:
 722 006c 8093 0000 		sts mouse_report+1,r24
 723               	.L83:
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 724               		.loc 1 110 0 is_stmt 1
 725 0070 8091 0000 		lds r24,mouse_report+1
 726 0074 87FF      		sbrs r24,7
 727 0076 00C0      		rjmp .L84
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 728               		.loc 1 110 0 is_stmt 0 discriminator 1
 729 0078 0E94 0000 		call move_unit
 730               	.LVL82:
 731 007c 8195      		neg r24
 732 007e 8093 0000 		sts mouse_report+1,r24
 733               	.L84:
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 734               		.loc 1 111 0 is_stmt 1
 735 0082 1C16      		cp __zero_reg__,r28
 736 0084 04F4      		brge .L85
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 737               		.loc 1 111 0 is_stmt 0 discriminator 1
 738 0086 0E94 0000 		call move_unit
 739               	.LVL83:
 740 008a 8093 0000 		sts mouse_report+2,r24
 741               	.L85:
 112:./tmk_core/common/mousekey.c **** 
 742               		.loc 1 112 0 is_stmt 1
 743 008e 8091 0000 		lds r24,mouse_report+2
 744 0092 87FF      		sbrs r24,7
 745 0094 00C0      		rjmp .L86
 112:./tmk_core/common/mousekey.c **** 
 746               		.loc 1 112 0 is_stmt 0 discriminator 1
 747 0096 0E94 0000 		call move_unit
 748               	.LVL84:
 749 009a 8195      		neg r24
 750 009c 8093 0000 		sts mouse_report+2,r24
 751               	.L86:
 115:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 752               		.loc 1 115 0 is_stmt 1
 753 00a0 6091 0000 		lds r22,mouse_report+1
 754 00a4 6623      		tst r22
 755 00a6 01F0      		breq .L87
 115:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 756               		.loc 1 115 0 is_stmt 0 discriminator 1
 757 00a8 C091 0000 		lds r28,mouse_report+2
 758 00ac CC23      		tst r28
 759 00ae 01F0      		breq .L87
 116:./tmk_core/common/mousekey.c ****         mouse_report.y *= 0.7;
 760               		.loc 1 116 0 is_stmt 1
 761 00b0 062E      		mov __tmp_reg__,r22
 762 00b2 000C      		lsl r0
 763 00b4 770B      		sbc r23,r23
 764 00b6 880B      		sbc r24,r24
 765 00b8 990B      		sbc r25,r25
 766 00ba 0E94 0000 		call __floatsisf
 767               	.LVL85:
 768 00be 23E3      		ldi r18,lo8(51)
 769 00c0 33E3      		ldi r19,lo8(51)
 770 00c2 43E3      		ldi r20,lo8(51)
 771 00c4 5FE3      		ldi r21,lo8(63)
 772 00c6 0E94 0000 		call __mulsf3
 773               	.LVL86:
 774 00ca 0E94 0000 		call __fixsfsi
 775               	.LVL87:
 776 00ce 6093 0000 		sts mouse_report+1,r22
 117:./tmk_core/common/mousekey.c ****     }
 777               		.loc 1 117 0
 778 00d2 6C2F      		mov r22,r28
 779 00d4 CC0F      		lsl r28
 780 00d6 770B      		sbc r23,r23
 781 00d8 880B      		sbc r24,r24
 782 00da 990B      		sbc r25,r25
 783 00dc 0E94 0000 		call __floatsisf
 784               	.LVL88:
 785 00e0 23E3      		ldi r18,lo8(51)
 786 00e2 33E3      		ldi r19,lo8(51)
 787 00e4 43E3      		ldi r20,lo8(51)
 788 00e6 5FE3      		ldi r21,lo8(63)
 789 00e8 0E94 0000 		call __mulsf3
 790               	.LVL89:
 791 00ec 0E94 0000 		call __fixsfsi
 792               	.LVL90:
 793 00f0 6093 0000 		sts mouse_report+2,r22
 794               	.L87:
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 795               		.loc 1 120 0
 796 00f4 1D16      		cp __zero_reg__,r29
 797 00f6 04F4      		brge .L88
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 798               		.loc 1 120 0 is_stmt 0 discriminator 1
 799 00f8 0E94 0000 		call wheel_unit
 800               	.LVL91:
 801 00fc 8093 0000 		sts mouse_report+3,r24
 802               	.L88:
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 803               		.loc 1 121 0 is_stmt 1
 804 0100 8091 0000 		lds r24,mouse_report+3
 805 0104 87FF      		sbrs r24,7
 806 0106 00C0      		rjmp .L89
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 807               		.loc 1 121 0 is_stmt 0 discriminator 1
 808 0108 0E94 0000 		call wheel_unit
 809               	.LVL92:
 810 010c 8195      		neg r24
 811 010e 8093 0000 		sts mouse_report+3,r24
 812               	.L89:
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 813               		.loc 1 122 0 is_stmt 1
 814 0112 1116      		cp __zero_reg__,r17
 815 0114 04F4      		brge .L90
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 816               		.loc 1 122 0 is_stmt 0 discriminator 1
 817 0116 0E94 0000 		call wheel_unit
 818               	.LVL93:
 819 011a 8093 0000 		sts mouse_report+4,r24
 820               	.L90:
 123:./tmk_core/common/mousekey.c **** 
 821               		.loc 1 123 0 is_stmt 1
 822 011e 8091 0000 		lds r24,mouse_report+4
 823 0122 87FF      		sbrs r24,7
 824 0124 00C0      		rjmp .L91
 123:./tmk_core/common/mousekey.c **** 
 825               		.loc 1 123 0 is_stmt 0 discriminator 1
 826 0126 0E94 0000 		call wheel_unit
 827               	.LVL94:
 828 012a 8195      		neg r24
 829 012c 8093 0000 		sts mouse_report+4,r24
 830               	.L91:
 831               	/* epilogue start */
 126:./tmk_core/common/mousekey.c **** 
 832               		.loc 1 126 0 is_stmt 1
 833 0130 DF91      		pop r29
 834 0132 CF91      		pop r28
 835 0134 1F91      		pop r17
 125:./tmk_core/common/mousekey.c **** }
 836               		.loc 1 125 0
 837 0136 0C94 0000 		jmp mousekey_send
 838               	.LVL95:
 839               	.L81:
 105:./tmk_core/common/mousekey.c ****         mousekey_repeat++;
 840               		.loc 1 105 0
 841 013a 9F3F      		cpi r25,lo8(-1)
 842 013c 01F0      		breq .+2
 843 013e 00C0      		rjmp .L92
 844 0140 00C0      		rjmp .L84
 845               	.L76:
 846               	/* epilogue start */
 126:./tmk_core/common/mousekey.c **** 
 847               		.loc 1 126 0
 848 0142 DF91      		pop r29
 849 0144 CF91      		pop r28
 850 0146 1F91      		pop r17
 851 0148 0895      		ret
 852               		.cfi_endproc
 853               	.LFE102:
 855               		.section	.text.mousekey_clear,"ax",@progbits
 856               	.global	mousekey_clear
 858               	mousekey_clear:
 859               	.LFB106:
 176:./tmk_core/common/mousekey.c **** }
 177:./tmk_core/common/mousekey.c **** 
 178:./tmk_core/common/mousekey.c **** void mousekey_clear(void)
 179:./tmk_core/common/mousekey.c **** {
 860               		.loc 1 179 0
 861               		.cfi_startproc
 862               	/* prologue: function */
 863               	/* frame size = 0 */
 864               	/* stack size = 0 */
 865               	.L__stack_usage = 0
 180:./tmk_core/common/mousekey.c ****     mouse_report = (report_mouse_t){};
 866               		.loc 1 180 0
 867 0000 E0E0      		ldi r30,lo8(mouse_report)
 868 0002 F0E0      		ldi r31,hi8(mouse_report)
 869 0004 85E0      		ldi r24,lo8(5)
 870 0006 DF01      		movw r26,r30
 871               		0:
 872 0008 1D92      		st X+,__zero_reg__
 873 000a 8A95      		dec r24
 874 000c 01F4      		brne 0b
 181:./tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 875               		.loc 1 181 0
 876 000e 1092 0000 		sts mousekey_repeat,__zero_reg__
 182:./tmk_core/common/mousekey.c ****     mousekey_accel = 0;
 877               		.loc 1 182 0
 878 0012 1092 0000 		sts mousekey_accel,__zero_reg__
 879 0016 0895      		ret
 880               		.cfi_endproc
 881               	.LFE106:
 883               		.section	.bss.last_timer,"aw",@nobits
 886               	last_timer:
 887 0000 0000      		.zero	2
 888               	.global	mk_wheel_time_to_max
 889               		.section	.data.mk_wheel_time_to_max,"aw",@progbits
 892               	mk_wheel_time_to_max:
 893 0000 28        		.byte	40
 894               	.global	mk_wheel_max_speed
 895               		.section	.data.mk_wheel_max_speed,"aw",@progbits
 898               	mk_wheel_max_speed:
 899 0000 08        		.byte	8
 900               	.global	mk_time_to_max
 901               		.section	.data.mk_time_to_max,"aw",@progbits
 904               	mk_time_to_max:
 905 0000 0A        		.byte	10
 906               	.global	mk_max_speed
 907               		.section	.data.mk_max_speed,"aw",@progbits
 910               	mk_max_speed:
 911 0000 03        		.byte	3
 912               	.global	mk_interval
 913               		.section	.data.mk_interval,"aw",@progbits
 916               	mk_interval:
 917 0000 14        		.byte	20
 918               	.global	mk_delay
 919               		.section	.data.mk_delay,"aw",@progbits
 922               	mk_delay:
 923 0000 0A        		.byte	10
 924               		.section	.bss.mousekey_accel,"aw",@nobits
 927               	mousekey_accel:
 928 0000 00        		.zero	1
 929               		.section	.bss.mousekey_repeat,"aw",@nobits
 932               	mousekey_repeat:
 933 0000 00        		.zero	1
 934               		.section	.bss.mouse_report,"aw",@nobits
 937               	mouse_report:
 938 0000 0000 0000 		.zero	5
 938      00
 939               		.text
 940               	.Letext0:
 941               		.file 2 "/usr/lib/avr/include/stdint.h"
 942               		.file 3 "./tmk_core/common/report.h"
 943               		.file 4 "./tmk_core/common/debug.h"
 944               		.file 5 "./tmk_core/protocol/lufa/LUFA-git/LUFA/Drivers/USB/Core/USBTask.h"
 945               		.file 6 "./tmk_core/common/host.h"
 946               		.file 7 "./tmk_core/common/timer.h"
 947               		.file 8 "./tmk_core/common/keycode.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 mousekey.c
     /tmp/ccHWGuQi.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccHWGuQi.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccHWGuQi.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccHWGuQi.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccHWGuQi.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccHWGuQi.s:12     .text.move_unit:0000000000000000 move_unit
     /tmp/ccHWGuQi.s:927    .bss.mousekey_accel:0000000000000000 mousekey_accel
     /tmp/ccHWGuQi.s:910    .data.mk_max_speed:0000000000000000 mk_max_speed
     /tmp/ccHWGuQi.s:932    .bss.mousekey_repeat:0000000000000000 mousekey_repeat
     /tmp/ccHWGuQi.s:904    .data.mk_time_to_max:0000000000000000 mk_time_to_max
     /tmp/ccHWGuQi.s:124    .text.wheel_unit:0000000000000000 wheel_unit
     /tmp/ccHWGuQi.s:898    .data.mk_wheel_max_speed:0000000000000000 mk_wheel_max_speed
     /tmp/ccHWGuQi.s:892    .data.mk_wheel_time_to_max:0000000000000000 mk_wheel_time_to_max
     /tmp/ccHWGuQi.s:221    .text.mousekey_on:0000000000000000 mousekey_on
     /tmp/ccHWGuQi.s:937    .bss.mouse_report:0000000000000000 mouse_report
     /tmp/ccHWGuQi.s:403    .text.mousekey_off:0000000000000000 mousekey_off
     /tmp/ccHWGuQi.s:616    .text.mousekey_send:0000000000000000 mousekey_send
     /tmp/ccHWGuQi.s:886    .bss.last_timer:0000000000000000 last_timer
     /tmp/ccHWGuQi.s:644    .text.mousekey_task:0000000000000000 mousekey_task
     /tmp/ccHWGuQi.s:916    .data.mk_interval:0000000000000000 mk_interval
     /tmp/ccHWGuQi.s:922    .data.mk_delay:0000000000000000 mk_delay
     /tmp/ccHWGuQi.s:858    .text.mousekey_clear:0000000000000000 mousekey_clear

UNDEFINED SYMBOLS
__divmodhi4
host_mouse_send
timer_read
__floatsisf
__mulsf3
__fixsfsi
timer_elapsed
__do_copy_data
__do_clear_bss
